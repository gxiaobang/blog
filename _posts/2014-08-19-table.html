---
layout: default
title: 倔强的表格固定
---

<p>
	想到固定就想到css属性(position: fixed)，相对于window固定，而现在需求相对于包裹表格的element固定，显然fixed并不适用。单纯的css解决不了，只能用绝对定位外加js控制，根据滚动条的距离来设置固定位置。
</p>

<link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/css/frezen-table.css">
<div class="frezen-table">
	<div class="frezen-scroll">
		<table>
			<thead>
				<tr>
					<td>序号</td>
					<td>姓名</td>
					<td>编号</td>
					<td>职位</td>
					<td>部门</td>
					<td>备注</td>
					<td>序号</td>
					<td>姓名</td>
					<td>编号</td>
					<td>职位</td>
					<td>部门</td>
					<td>备注</td>
					<td>序号</td>
					<td>姓名</td>
					<td>编号</td>
					<td>职位</td>
					<td>部门</td>
					<td>备注</td>
				</tr>
			</thead>
			<tbody>
				{% for i in (1..50) %}
					<tr>
						<td>0{{ i }}</td>
						<td>LL{{ i }}</td>
						<td>000{{ i }}</td>
						<td>工程师</td>
						<td>生产部</td>
						<td>勤劳、勇敢</td>
						<td>0{{ i }}</td>
						<td>LL{{ i }}</td>
						<td>000{{ i }}</td>
						<td>工程师</td>
						<td>生产部</td>
						<td>勤劳、勇敢</td>
						<td>0{{ i }}</td>
						<td>LL{{ i }}</td>
						<td>000{{ i }}</td>
						<td>工程师</td>
						<td>生产部</td>
						<td>勤劳、勇敢</td>
					</tr>
				{% endfor %}
			</tbody>		
		</table>
	</div>
	<div class="frezen-list">
		
	</div>
	<div class="frezen-thead">
		
	</div>
</div>
<script type="text/javascript" src="{{ site.baseurl }}/assets/javascripts/frezen-table.js"></script>
<script type="text/javascript">
// 选择器
/*function $selector( node, context ) {
	return ( context || document ).querySelectorAll( node );
}
function init() {
	var tableWrap = $selector( '.table-wrap' )[0],
		tableScroll = $selector( '.table-scroll', tableWrap )[0],
		tableSelf = $selector( '.table-self', tableWrap )[0],
		tableFixed = $selector( '.table-fixed', tableWrap )[0],
		tableFixedSpans = $selector( 'span', tableFixed ),
		i = 0;

	function makeFixedBox() {
		// 设置fixed宽度
		tableFixed.style.width = tableScroll.clientWidth + 'px';
		tableFixed.children[0].style.width = tableScroll.scrollWidth + 10 + 'px';

		var cells = tableSelf.tHead.rows[0].cells;
		for( var i = 0; i < tableFixedSpans.length; i++ ) {
			tableFixedSpans[i].style.width = cells[i].offsetWidth - 41 + 'px';
		}
	}
	function scrollFixed() {
		tableFixed.children[0].style.marginLeft = -this.scrollLeft + 'px';
	}

	makeFixedBox();
	tableScroll.onscroll = scrollFixed;
}

window.onload = init;*/
</script>